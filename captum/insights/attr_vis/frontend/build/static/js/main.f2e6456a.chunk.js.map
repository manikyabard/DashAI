{"version":3,"sources":["App.module.css","utils/cx.ts","components/Header.tsx","components/Spinner.tsx","components/Arguments.tsx","components/ClassFilter.tsx","models/insightsConfig.ts","components/Filter.tsx","components/FilterContainer.tsx","utils/color.ts","components/Tooltip.tsx","components/Plot.tsx","components/Feature.tsx","components/LabelButton.tsx","components/Contributions.tsx","components/Visualization.tsx","App.tsx","WebApp.tsx","index.tsx"],"names":["module","exports","cx","obj","Array","isArray","join","Object","keys","filter","k","Header","className","styles","header","header__name","header__nav","header__nav__item","Spinner","spinner","NumberArgument","props","min","limit","max","name","input","type","value","onChange","handleInputChange","EnumArgument","options","map","item","key","select","StringArgument","ClassFilter","ArgumentType","tags","classes","autofocus","suggestions","suggestedClasses","handleDelete","handleClassDelete","handleAddition","newTag","id","Error","handleClassAdd","minQueryLength","placeholder","Filter","methods","method_args_components","selectedMethod","methodArguments","method_arguments","idx","config","Number","handleArgumentChange","Enum","String","createComponentFromConfig","onSubmit","handleSubmit","prediction","btn","parseEventTargetValue","target","checked","parseInt","FilterContainer","classId","state","slice","removed_class","splice","suggested_classes","setState","added_class","t","event","selected_method","method","argument_config","args","forEach","data","attribution_method","arguments","fetchData","preventDefault","c","this","React","Component","calcHSLFromScore","percentage","zeroDefault","blue_hsl","red_hsl","target_hsl","default_hsl","abs_percent","Math","abs","color","Tooltip","tooltip","label","Plot","createPlotlyComponent","Plotly","ImageFeature","gallery","src","base","alt","modified","TextFeature","color_words","w","i","style","backgroundColor","toFixed","GeneralFeature","x","y","marker","v","displayModeBar","layout","height","margin","pad","yaxis","fixedrange","showgrid","xaxis","Feature","LabelButton","onClick","e","onTargetClick","labelIndex","instance","active","children","Contributions","feature_outputs","f","contribution","bar_height","Visualization","loading","console","log","features","panel","predicted","p","row","index","active_index","score","actual","Visualizations","length","viz","AppBase","fetchInit","app","WebApp","_fetchInit","fetch","then","r","json","filter_config","headers","body","JSON","stringify","response","callback","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f2e6456a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"header\":\"App_header__3ZZ1n\",\"header__name\":\"App_header__name__11V8z\",\"header__nav\":\"App_header__nav__1d4-r\",\"header__nav__item\":\"App_header__nav__item__1sl_l\",\"header__nav__item--active\":\"App_header__nav__item--active__qHsJb\",\"filter-panel\":\"App_filter-panel__1_W-D\",\"viz__panel\":\"App_viz__panel__1DvPS\",\"filter-panel__column\":\"App_filter-panel__column__tSar1\",\"filter-panel__column__title\":\"App_filter-panel__column__title__1BI85\",\"panel__column__title\":\"App_panel__column__title__1ZKms\",\"filter-panel__column__body\":\"App_filter-panel__column__body__2gifz\",\"filter-panel__column--end\":\"App_filter-panel__column--end__11Fot\",\"select\":\"App_select__lfdUS\",\"input\":\"App_input__2NxBo\",\"input--narrow\":\"App_input--narrow__3EP69\",\"row\":\"App_row__1s1ax\",\"row--padding\":\"App_row--padding__290gG\",\"btn\":\"App_btn__34jjX\",\"btn--large\":\"App_btn--large__1yJzq\",\"btn--outline\":\"App_btn--outline__Gy9-J\",\"btn--solid\":\"App_btn--solid__jJmRZ\",\"viz\":\"App_viz__22ORP\",\"loading\":\"App_loading__wCN4P\",\"panel\":\"App_panel___hL33\",\"panel--loading\":\"App_panel--loading__2o16s\",\"panel--center\":\"App_panel--center__3KnXW\",\"panel__column\":\"App_panel__column__3x9QU\",\"panel__column--stretch\":\"App_panel__column--stretch__2o3HO\",\"gallery\":\"App_gallery__11BWP\",\"gallery__item\":\"App_gallery__item__2XNr9\",\"gallery__item__image\":\"App_gallery__item__image__3sU36\",\"gallery__item__description\":\"App_gallery__item__description__1eCLM\",\"bar-chart__group\":\"App_bar-chart__group__17Ybq\",\"bar-chart__group__bar\":\"App_bar-chart__group__bar__1T_FD\",\"bar-chart__group__title\":\"App_bar-chart__group__title__1gSfe\",\"percentage-blue\":\"App_percentage-blue__2Y6MH\",\"percentage-light-blue\":\"App_percentage-light-blue__2W41P\",\"percentage-light-red\":\"App_percentage-light-red__189Ov\",\"percentage-red\":\"App_percentage-red__3dSfE\",\"percentage-gray\":\"App_percentage-gray__HnO9X\",\"percentage-white\":\"App_percentage-white__3aG-5\",\"text-feature-word\":\"App_text-feature-word__Spy0f\",\"tooltip__label\":\"App_tooltip__label__37Y9h\",\"general-feature__label-container\":\"App_general-feature__label-container__1wWDg\",\"general-feature__label\":\"App_general-feature__label__Oz5fH\",\"general-feature__percent\":\"App_general-feature__percent__2FWgI\",\"general-feature__bar-container\":\"App_general-feature__bar-container__ZNGWt\",\"general-feature__bar\":\"App_general-feature__bar__3s8ZU\",\"general-feature__bar__positive\":\"App_general-feature__bar__positive__JbWh6\",\"general-feature__bar__negative\":\"App_general-feature__bar__negative__Tju-a\",\"spinner\":\"App_spinner__zg8k4\"};","// helper method to convert an array or object into a valid classname\nfunction cx(obj: any) {\n  if (Array.isArray(obj)) {\n    return obj.join(\" \");\n  }\n  return Object.keys(obj)\n    .filter((k) => !!obj[k])\n    .join(\" \");\n}\n\nexport default cx;\n","import React from \"react\";\nimport styles from \"../App.module.css\";\nimport cx from \"../utils/cx\";\n\nfunction Header() {\n  return (\n    <header className={styles.header}>\n      <div className={styles.header__name}>Captum Insights</div>\n      <nav className={styles.header__nav}>\n        <ul>\n          <li\n            className={cx([\n              styles.header__nav__item,\n              styles[\"header__nav__item--active\"],\n            ])}\n          >\n            Instance Attribution\n          </li>\n        </ul>\n      </nav>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport styles from \"../App.module.css\";\n\nfunction Spinner() {\n  return <div className={styles.spinner} />;\n}\n\nexport default Spinner;\n","import React from \"react\";\nimport styles from \"../App.module.css\";\nimport cx from \"../utils/cx\";\nimport { GenericArgumentConfig } from \"../models/insightsConfig\";\nimport { UserInputField } from \"../models/typeHelpers\";\n\ninterface ArgumentProps {\n  name: string;\n  handleInputChange: React.ChangeEventHandler<UserInputField>;\n}\n\nfunction NumberArgument(props: ArgumentProps & GenericArgumentConfig<number>) {\n  var min = props.limit[0];\n  var max = props.limit[1];\n  return (\n    <div>\n      {props.name}:\n      <input\n        className={cx([styles.input, styles[\"input--narrow\"]])}\n        name={props.name}\n        type=\"number\"\n        value={props.value}\n        min={min}\n        max={max}\n        onChange={props.handleInputChange}\n      />\n    </div>\n  );\n}\n\nfunction EnumArgument(props: ArgumentProps & GenericArgumentConfig<string>) {\n  const options = props.limit.map((item, key) => (\n    <option value={item}>{item}</option>\n  ));\n  return (\n    <div>\n      {props.name}:\n      <select\n        className={styles.select}\n        name={props.name}\n        value={props.value}\n        onChange={props.handleInputChange}\n      >\n        {options}\n      </select>\n    </div>\n  );\n}\n\nfunction StringArgument(props: ArgumentProps & { value: string }) {\n  return (\n    <div>\n      {props.name}:\n      <input\n        className={cx([styles.input, styles[\"input--narrow\"]])}\n        name={props.name}\n        type=\"text\"\n        value={props.value}\n        onChange={props.handleInputChange}\n      />\n    </div>\n  );\n}\n\nexport { StringArgument, EnumArgument, NumberArgument };\n","import React from \"react\";\nimport ReactTags from \"react-tag-autocomplete\";\nimport { TagClass } from \"../models/filter\";\n\ninterface ClassFilterProps {\n  suggestedClasses: TagClass[];\n  classes: TagClass[];\n  handleClassDelete: (classId: number) => void;\n  handleClassAdd: (newClass: TagClass) => void;\n}\n\nfunction ClassFilter(props: ClassFilterProps) {\n\n  const handleAddition = (newTag: { id: number | string, name: string }) => {\n    /**\n     * Need this type check as we expect tagId to be number while the `react-tag-autocomplete` has \n     * id as number | string. \n     */\n    if(typeof newTag.id === 'string') {\n      throw Error(\"Invalid tag id received from ReactTags\");\n    } else {\n      props.handleClassAdd({id: newTag.id, name: newTag.name}); \n    }\n  }\n\n  return (\n    <ReactTags\n      tags={props.classes}\n      autofocus={false}\n      suggestions={props.suggestedClasses}\n      handleDelete={props.handleClassDelete}\n      handleAddition={handleAddition}\n      minQueryLength={0}\n      placeholder=\"add new class...\"\n    />\n  );\n}\n\nexport default ClassFilter;\n","export enum ArgumentType {\n    Number = \"number\",\n    Enum = \"enum\",\n    String = \"string\",\n    Boolean = \"boolean\"\n}\n\nexport type GenericArgumentConfig<T> = {\n    value: T;\n    limit: T[];\n}\n\nexport type ArgumentConfig =\n    { type: ArgumentType.Number } & GenericArgumentConfig<number> |\n    { type: ArgumentType.Enum } & GenericArgumentConfig<string> |\n    { type: ArgumentType.String } & { value: string } |\n    { type: ArgumentType.Boolean } & { value: boolean }\n\nexport interface MethodsArguments {\n    [method_name: string]: {\n        [arg_name: string]: ArgumentConfig;\n    }\n}\n\nexport interface InsightsConfig {\n    classes: string[];\n    methods: string[];\n    method_arguments: MethodsArguments;\n    selected_method: string;\n}","import React from \"react\";\nimport { StringArgument, EnumArgument, NumberArgument } from \"./Arguments\";\nimport cx from \"../utils/cx\";\nimport styles from \"../App.module.css\";\nimport ClassFilter from \"./ClassFilter\";\nimport { MethodsArguments, ArgumentConfig, ArgumentType } from \"../models/insightsConfig\";\nimport { TagClass } from \"../models/filter\";\nimport { UserInputField } from \"../models/typeHelpers\";\n\n\ninterface FilterProps {\n  prediction: string;\n  selectedMethod: string;\n  methodArguments: MethodsArguments;\n  suggestedClasses: TagClass[];\n  classes: TagClass[];\n  methods: string[];\n  handleInputChange: React.ChangeEventHandler<UserInputField>;\n  handleArgumentChange: React.ChangeEventHandler<UserInputField>;\n  handleSubmit: React.FormEventHandler<HTMLFormElement>;\n  handleClassAdd: (newClass: TagClass) => void;\n  handleClassDelete: (id: number) => void;\n}\n\nfunction Filter(props: FilterProps) {\n  const createComponentFromConfig = (name: string, config: ArgumentConfig) => {\n    switch (config.type) {\n      case ArgumentType.Number:\n        return (\n          <NumberArgument\n            key={name}\n            name={name}\n            limit={config.limit}\n            value={config.value}\n            handleInputChange={props.handleArgumentChange}\n          />\n        );\n      case ArgumentType.Enum:\n        return (\n          <EnumArgument\n            key={name}\n            name={name}\n            limit={config.limit}\n            value={config.value}\n            handleInputChange={props.handleArgumentChange}\n          />\n        );\n      case ArgumentType.String:\n        return (\n          <StringArgument\n            key={name}\n            name={name}\n            value={config.value}\n            handleInputChange={props.handleArgumentChange}\n          />\n        );\n      default:\n        throw new Error(\"Unsupported config type: \" + config.type);\n    }\n  };\n\n  const methods = props.methods.map((item, key) => (\n    <option key={key} value={item}>\n      {item}\n    </option>\n  ));\n  var method_args_components = null;\n  if (props.selectedMethod in props.methodArguments) {\n    const method_arguments = props.methodArguments[props.selectedMethod];\n    method_args_components = Object.keys(method_arguments).map((key, idx) =>\n      createComponentFromConfig(key, method_arguments[key])\n    );\n  }\n  return (\n    <form onSubmit={props.handleSubmit}>\n      <div className={styles[\"filter-panel\"]}>\n        <div className={styles[\"filter-panel__column\"]}>\n          <div className={styles[\"filter-panel__column__title\"]}>\n            Filter by Classes\n          </div>\n          <div className={styles[\"filter-panel__column__body\"]}>\n            <ClassFilter\n              handleClassDelete={props.handleClassDelete}\n              handleClassAdd={props.handleClassAdd}\n              suggestedClasses={props.suggestedClasses}\n              classes={props.classes}\n            />\n          </div>\n        </div>\n        <div className={styles[\"filter-panel__column\"]}>\n          <div className={styles[\"filter-panel__column__title\"]}>\n            Filter by Instances\n          </div>\n          <div className={styles[\"filter-panel__column__body\"]}>\n            Prediction:{\" \"}\n            <select\n              className={styles.select}\n              name=\"prediction\"\n              onChange={props.handleInputChange}\n              value={props.prediction}\n            >\n              <option value=\"all\">All</option>\n              <option value=\"correct\">Correct</option>\n              <option value=\"incorrect\">Incorrect</option>\n            </select>\n          </div>\n        </div>\n        <div className={styles[\"filter-panel__column\"]}>\n          <div className={styles[\"filter-panel__column__title\"]}>\n            Choose Attribution Method\n          </div>\n          <div className={styles[\"filter-panel__column__body\"]}>\n            Attribution Method:{\" \"}\n            <select\n              className={styles.select}\n              name=\"selected_method\"\n              onChange={props.handleInputChange}\n              value={props.selectedMethod}\n            >\n              {methods}\n            </select>\n          </div>\n        </div>\n        <div className={styles[\"filter-panel__column\"]}>\n          <div className={styles[\"filter-panel__column__title\"]}>\n            Attribution Method Arguments\n          </div>\n          <div className={styles[\"filter-panel__column__body\"]}>\n            {method_args_components}\n          </div>\n        </div>\n        <div\n          className={cx([\n            styles[\"filter-panel__column\"],\n            styles[\"filter-panel__column--end\"],\n          ])}\n        >\n          <button\n            className={cx([\n              styles.btn,\n              styles[\"btn--outline\"],\n              styles[\"btn--large\"],\n            ])}\n          >\n            Fetch\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default Filter;\n","import React from \"react\";\nimport Filter from \"./Filter\";\nimport { InsightsConfig, MethodsArguments } from \"../models/insightsConfig\";\nimport { TagClass, FilterConfig } from \"../models/filter\";\nimport { UserInputField } from \"../models/typeHelpers\";\n\nfunction parseEventTargetValue(target: UserInputField) {\n  switch (target.type) {\n    case \"checkbox\":\n      return (target as HTMLInputElement).checked;\n    case \"number\":\n      return parseInt(target.value);\n    default:\n      return target.value;\n  }\n}\n\ninterface FilterContainerProps {\n  config: InsightsConfig;\n  fetchData: (filter_config: FilterConfig) => void;\n}\n\ninterface FilterContainerState {\n  prediction: string;\n  classes: TagClass[];\n  suggested_classes: TagClass[];\n  selected_method: string;\n  method_arguments: MethodsArguments;\n}\n\nclass FilterContainer extends React.Component<FilterContainerProps, FilterContainerState> {\n  constructor(props: FilterContainerProps) {\n    super(props);\n    const suggested_classes = props.config.classes.map((c, classId) => ({\n      id: classId,\n      name: c,\n    }));\n    this.state = {\n      prediction: \"all\",\n      classes: [],\n      suggested_classes: suggested_classes,\n      selected_method: props.config.selected_method,\n      method_arguments: props.config.method_arguments,\n    };\n  }\n\n  handleClassDelete = (classId: number) => {\n    const classes = this.state.classes.slice(0);\n    const removed_class = classes.splice(classId, 1);\n    const suggested_classes = [...this.state.suggested_classes, ...removed_class];\n    this.setState({ classes, suggested_classes });\n  };\n\n  handleClassAdd = (added_class: TagClass) => {\n    const classes = [...this.state.classes, added_class];\n    const suggested_classes = this.state.suggested_classes.filter(\n      (t) => t.id !== added_class.id\n    );\n    this.setState({ classes, suggested_classes });\n  };\n\n  handleInputChange = (event: React.ChangeEvent<UserInputField>) => {\n    const target = event.target;\n    const value = parseEventTargetValue(event.target);\n    const name = target.name;\n    this.setState({\n      [name]: value,\n    } as any);\n  };\n\n  handleArgumentChange = (event: React.ChangeEvent<UserInputField>) => {\n    const target = event.target;\n    const name = target.name;\n    const value = parseEventTargetValue(target);\n    const method_arguments = this.state.method_arguments;\n    method_arguments[this.state.selected_method][name].value = value;\n    this.setState({ method_arguments });\n  };\n\n  handleSubmit = (event: React.FormEvent) => {\n    const method = this.state.selected_method;\n    const method_arguments = this.state.method_arguments;\n    const argument_config =\n      method in method_arguments ? method_arguments[method] : {};\n    const args: { [key: string]: string | boolean | number } = {};\n    Object.keys(argument_config).forEach(function (key) {\n      args[key] = argument_config[key].value;\n    });\n    const data = {\n      prediction: this.state.prediction,\n      classes: this.state.classes.map((classId) => classId[\"name\"]),\n      attribution_method: method,\n      arguments: args,\n    };\n    this.props.fetchData(data);\n    event.preventDefault();\n  };\n\n  render() {\n    return (\n      <Filter\n        prediction={this.state.prediction}\n        classes={this.state.classes}\n        suggestedClasses={this.state.suggested_classes}\n        selectedMethod={this.state.selected_method}\n        methodArguments={this.state.method_arguments}\n        methods={this.props.config.methods}\n        handleClassAdd={this.handleClassAdd}\n        handleClassDelete={this.handleClassDelete}\n        handleInputChange={this.handleInputChange}\n        handleArgumentChange={this.handleArgumentChange}\n        handleSubmit={this.handleSubmit}\n      />\n    );\n  }\n}\n\nexport default FilterContainer;\n","function calcHSLFromScore(percentage: number, zeroDefault = false) {\n  const blue_hsl = [220, 100, 80];\n  const red_hsl = [10, 100, 67];\n\n  let target_hsl = null;\n  if (percentage > 0) {\n    target_hsl = blue_hsl;\n  } else {\n    target_hsl = red_hsl;\n  }\n\n  const default_hsl = [0, 40, zeroDefault ? 100 : 90];\n  const abs_percent = Math.abs(percentage * 0.01);\n  if (abs_percent < 0.02) {\n    return `hsl(${default_hsl[0]}, ${default_hsl[1]}%, ${default_hsl[2]}%)`;\n  }\n\n  const color = [\n    target_hsl[0],\n    (target_hsl[1] - default_hsl[1]) * abs_percent + default_hsl[1],\n    (target_hsl[2] - default_hsl[2]) * abs_percent + default_hsl[2],\n  ];\n  return `hsl(${color[0]}, ${color[1]}%, ${color[2]}%)`;\n}\n\nexport { calcHSLFromScore };\n","import React from \"react\";\n\nimport styles from \"../App.module.css\";\n\nfunction Tooltip(props: { label: string }) {\n  return (\n    <div className={styles.tooltip}>\n      <div className={styles[\"tooltip__label\"]}>{props.label}</div>\n    </div>\n  );\n}\n\nexport default Tooltip;\n","import createPlotlyComponent from \"react-plotly.js/factory\";\nimport Plotly from \"plotly.js-basic-dist\";\n\nconst Plot = createPlotlyComponent(Plotly);\n\nexport default Plot;\n","import { calcHSLFromScore } from \"../utils/color\";\nimport React from \"react\";\nimport styles from \"../App.module.css\";\nimport Tooltip from \"./Tooltip\";\nimport Plot from \"./Plot\";\nimport { FeatureOutput } from \"../models/visualizationOutput\";\n\ninterface FeatureProps<T> {\n  data: T;\n}\n\ntype ImageFeatureProps = FeatureProps<{\n  base: string;\n  modified: string;\n  name: string;\n}>;\n\nfunction ImageFeature(props: ImageFeatureProps) {\n  return (\n    <>\n      <div className={styles[\"panel__column__title\"]}>\n        {props.data.name} (Image)\n      </div>\n      <div className={styles[\"panel__column__body\"]}>\n        <div className={styles.gallery}>\n          <div className={styles[\"gallery__item\"]}>\n            <div className={styles[\"gallery__item__image\"]}>\n              <img\n                src={\"data:image/png;base64,\" + props.data.base}\n                alt=\"original\"\n              />\n            </div>\n            <div className={styles[\"gallery__item__description\"]}>Original</div>\n          </div>\n          <div className={styles[\"gallery__item\"]}>\n            <div className={styles[\"gallery__item__image\"]}>\n              <img\n                src={\"data:image/png;base64,\" + props.data.modified}\n                alt=\"attribution\"\n              />\n            </div>\n            <div className={styles[\"gallery__item__description\"]}>\n              Attribution Magnitude\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype TextFeatureProps = FeatureProps<{\n  base: number[];\n  name: string;\n  modified: number[];\n}>;\n\nfunction TextFeature(props: TextFeatureProps) {\n  const color_words = props.data.base.map((w, i) => {\n    return (\n      <>\n        <span\n          style={{\n            backgroundColor: calcHSLFromScore(props.data.modified[i], false),\n          }}\n          className={styles[\"text-feature-word\"]}\n        >\n          {w}\n          <Tooltip label={props.data.modified[i]?.toFixed(3)} />\n        </span>{\" \"}\n      </>\n    );\n  });\n  return (\n    <>\n      <div className={styles[\"panel__column__title\"]}>\n        {props.data.name} (Text)\n      </div>\n      <div className={styles[\"panel__column__body\"]}>{color_words}</div>\n    </>\n  );\n}\n\ntype GeneralFeatureProps = FeatureProps<{\n  base: number[];\n  modified: number[];\n  name: string;\n}>;\n\nfunction GeneralFeature(props: GeneralFeatureProps) {\n  return (\n    <Plot\n      data={[\n        {\n          x: props.data.base,\n          y: props.data.modified,\n          type: \"bar\",\n          marker: {\n            color: props.data.modified.map(\n              (v) => (v < 0 ? \"#d45c43\" : \"#80aaff\") // red if negative, else blue\n            ),\n          },\n        },\n      ]}\n      config={{\n        displayModeBar: false,\n      }}\n      layout={{\n        height: 300,\n        margin: {\n          t: 20,\n          pad: 0,\n        },\n        yaxis: {\n          fixedrange: true,\n          showgrid: false,\n        },\n        xaxis: {\n          fixedrange: false,\n        },\n      }}\n    />\n  );\n}\n\nfunction Feature(props: {data: FeatureOutput}) {\n  const data = props.data;\n  switch (data.type) {\n    case \"image\":\n      return <ImageFeature data={data} />;\n    case \"text\":\n      return <TextFeature data={data} />;\n    case \"general\":\n      return <GeneralFeature data={data} />;\n    case \"empty\":\n      return <></>;\n    default:\n      throw new Error(\"Unsupported feature visualization type: \" + data.type);\n  }\n}\n\nexport default Feature;\n","import React from \"react\";\nimport cx from \"../utils/cx\";\nimport styles from \"../App.module.css\";\n\ninterface LabelButtonProps {\n  labelIndex: number;\n  instance: number;\n  active: boolean;\n  onTargetClick: (labelIndex: number, instance: number) => void;\n}\n\nfunction LabelButton(props: React.PropsWithChildren<LabelButtonProps>) {\n  const onClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    props.onTargetClick(props.labelIndex, props.instance);\n  };\n\n  return (\n    <button\n      onClick={onClick}\n      className={cx({\n        [styles.btn]: true,\n        [styles[\"btn--solid\"]]: props.active,\n        [styles[\"btn--outline\"]]: !props.active,\n      })}\n    >\n      {props.children}\n    </button>\n  );\n}\n\nexport default LabelButton;\n","import React from \"react\";\nimport styles from \"../App.module.css\";\nimport { calcHSLFromScore } from \"../utils/color\";\nimport { FeatureOutput } from \"../models/visualizationOutput\";\n\ninterface ContributionsProps {\n  feature_outputs: FeatureOutput[];\n}\n\nfunction Contributions(props: ContributionsProps) {\n  return <>{props.feature_outputs.map((f) => {\n    // pad bar height so features with 0 contribution can still be seen\n    // in graph\n    const contribution = f.contribution * 100;\n    const bar_height = contribution > 10 ? contribution : contribution + 10;\n    return (\n      <div className={styles[\"bar-chart__group\"]}>\n        <div\n          className={styles[\"bar-chart__group__bar\"]}\n          style={{\n            height: bar_height + \"px\",\n            backgroundColor: calcHSLFromScore(contribution),\n          }}\n        />\n        <div className={styles[\"bar-chart__group__title\"]}>{f.name}</div>\n      </div>\n    );\n  })}</>\n}\n\nexport default Contributions;\n","import React from \"react\";\nimport styles from \"../App.module.css\";\nimport cx from \"../utils/cx\";\nimport Feature from \"./Feature\";\nimport Spinner from \"./Spinner\";\nimport LabelButton from \"./LabelButton\";\nimport Contributions from \"./Contributions\";\nimport { VisualizationOutput } from \"../models/visualizationOutput\";\n\ninterface VisualizationProps {\n  data: VisualizationOutput;\n  instance: number;\n  onTargetClick: (labelIndex: number, instance: number, callback: () => void) => void;\n}\n\ninterface VisualizationState {\n  loading: boolean;\n}\n\nclass Visualization extends React.Component<VisualizationProps, VisualizationState> {\n  constructor(props: VisualizationProps) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  onTargetClick = (labelIndex: number, instance: number) => {\n    this.setState({ loading: true });\n    this.props.onTargetClick(labelIndex, instance, () =>\n      this.setState({ loading: false })\n    );\n  };\n\n  render() {\n    const data = this.props.data;\n    console.log(\"visualization\", data);\n    const features = data.feature_outputs.map((f) => <Feature data={f} />);\n\n    return (\n      <>\n        {this.state.loading && (\n          <div className={styles.loading}>\n            <Spinner />\n          </div>\n        )}\n        <div\n          className={cx({\n            [styles.panel]: true,\n            [styles[\"panel--long\"]]: true,\n            [styles[\"panel--loading\"]]: this.state.loading,\n          })}\n        >\n          <div className={styles[\"panel__column\"]}>\n            <div className={styles[\"panel__column__title\"]}>Predicted</div>\n            <div className={styles[\"panel__column__body\"]}>\n              {data.predicted.map((p) => (\n                <div className={cx([styles.row, styles[\"row--padding\"]])}>\n                  <LabelButton\n                    onTargetClick={this.onTargetClick}\n                    labelIndex={p.index}\n                    instance={this.props.instance}\n                    active={p.index === data.active_index}\n                  >\n                    {p.label} ({p.score.toFixed(3)})\n                  </LabelButton>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className={styles[\"panel__column\"]}>\n            <div className={styles[\"panel__column__title\"]}>Label</div>\n            <div className={styles[\"panel__column__body\"]}>\n              <div className={cx([styles.row, styles[\"row--padding\"]])}>\n                <LabelButton\n                  onTargetClick={this.onTargetClick}\n                  labelIndex={data.actual.index}\n                  instance={this.props.instance}\n                  active={data.actual.index === data.active_index}\n                >\n                  {data.actual.label}\n                </LabelButton>\n              </div>\n            </div>\n          </div>\n          <div className={styles[\"panel__column\"]}>\n            <div className={styles[\"panel__column__title\"]}>Contribution</div>\n            <div className={styles[\"panel__column__body\"]}>\n              <div className={styles[\"bar-chart\"]}>\n                <Contributions feature_outputs={data.feature_outputs} />\n              </div>\n            </div>\n          </div>\n          <div\n            className={cx([\n              styles[\"panel__column\"],\n              styles[\"panel__column--stretch\"],\n            ])}\n          >\n            {features}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Visualization;\n","import React from \"react\";\nimport styles from \"./App.module.css\";\nimport Header from \"./components/Header\";\nimport cx from \"./utils/cx\";\nimport Spinner from \"./components/Spinner\";\nimport FilterContainer from \"./components/FilterContainer\";\nimport Visualization from \"./components/Visualization\";\nimport \"./App.css\";\nimport { VisualizationOutput } from \"./models/visualizationOutput\";\nimport { FilterConfig } from \"./models/filter\";\n\ninterface VisualizationsProps {\n  loading: boolean;\n  data: VisualizationOutput[];\n  onTargetClick: (labelIndex: number, instance: number, callback: () => void) => void;\n}\n\nfunction Visualizations(props: VisualizationsProps) {\n  if (props.loading) {\n    return (\n      <div className=\"viz\">\n        <div className={cx([styles.panel, styles[\"panel--center\"]])}>\n          <Spinner />\n        </div>\n      </div>\n    );\n  }\n\n  if (!props.data || props.data.length === 0) {\n    return (\n      <div className={styles.viz}>\n        <div className={styles.panel}>\n          <div className={styles[\"panel__column\"]}>\n            Please press{\" \"}\n            <strong className={styles[\"text-feature-word\"]}>Fetch</strong> to\n            start loading data.\n          </div>\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div className={styles.viz}>\n      {props.data.map((v, i) => (\n        <Visualization\n          data={v}\n          instance={i}\n          key={i}\n          onTargetClick={props.onTargetClick}\n        />\n      ))}\n    </div>\n  );\n}\n\ninterface AppBaseProps {\n  fetchInit: () => void;\n  fetchData: (filter_config: FilterConfig) => void;\n  config: any;\n  data: VisualizationOutput[];\n  loading: boolean;\n  onTargetClick: (labelIndex: number, instance: number, callback: () => void) => void;\n}\n\nclass AppBase extends React.Component<AppBaseProps> {\n  componentDidMount() {\n    this.props.fetchInit();\n  }\n\n  render() {\n    return (\n      <div className={styles.app}>\n        <Header />\n        <FilterContainer\n          fetchData={this.props.fetchData}\n          config={this.props.config}\n          key={this.props.config.classes}\n        />\n        <Visualizations\n          data={this.props.data}\n          loading={this.props.loading}\n          onTargetClick={this.props.onTargetClick}\n        />\n      </div>\n    );\n  }\n}\n\nexport default AppBase;\n","import React from \"react\";\nimport AppBase from \"./App\";\nimport { FilterConfig } from './models/filter';\nimport { VisualizationOutput } from \"./models/visualizationOutput\";\nimport { InsightsConfig } from \"./models/insightsConfig\";\n\n\ninterface WebAppState {\n  data: VisualizationOutput[];\n  config: InsightsConfig;\n  loading: boolean;\n}\n\nclass WebApp extends React.Component<{}, WebAppState> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      data: [],\n      config: {\n        classes: [],\n        methods: [],\n        method_arguments: {},\n        selected_method: \"\"\n      },\n      loading: false\n    };\n    this._fetchInit();\n  }\n\n  _fetchInit = () => {\n    fetch(\"init\")\n      .then(r => r.json())\n      .then(r => this.setState({ config: r }));\n  };\n\n  fetchData = (filter_config: FilterConfig) => {\n    this.setState({ loading: true });\n    fetch(\"fetch\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(filter_config)\n    })\n      .then(response => response.json())\n      .then(response => this.setState({ data: response, loading: false }));\n  };\n\n  onTargetClick = (labelIndex: number, instance: number, callback: () => void) => {\n    fetch(\"attribute\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ labelIndex, instance })\n    })\n      .then(response => response.json())\n      .then(response => {\n        const data = this.state.data ?? [];\n        data[instance] = response;\n        this.setState({ data });\n        callback();\n      });\n  };\n\n  render() {\n    return (\n      <AppBase\n        fetchData={this.fetchData}\n        fetchInit={this._fetchInit}\n        onTargetClick={this.onTargetClick}\n        data={this.state.data}\n        config={this.state.config}\n        loading={this.state.loading}\n      />\n    );\n  }\n}\n\nexport default WebApp;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport WebApp from \"./WebApp\";\n\nReactDOM.render(<WebApp />, document.getElementById(\"root\"));\n"],"sourceRoot":""}